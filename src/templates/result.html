<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MVEL Agent â€” Result</title>
    <style>
      :root{--bg:#ffffff;--card:#ffffff;--accent:#000000;--muted:#666666;--border:#d1d5db}
      body{font-family:Inter,system-ui,Segoe UI,Roboto,Arial;margin:0;background:var(--bg);color:#000}
      .wrap{max-width:1000px;margin:36px auto;padding:20px}
      .card{background:var(--card);border-radius:12px;padding:20px;box-shadow:0 6px 18px rgba(0,0,0,0.06);border:1px solid var(--border)}
      .meta{display:flex;flex-direction:column;gap:12px;align-items:stretch}
      .meta .left{font-size:0.95rem;color:var(--muted);display:flex;justify-content:space-between;align-items:center;gap:12px}
      pre.output{background:#ffffff;color:#000;padding:16px;border-radius:8px;overflow:auto;white-space:pre-wrap;border:1px solid var(--border);min-height:240px}
      .actions{display:flex;gap:8px;justify-content:flex-end}
      button{border:0;padding:10px 14px;border-radius:8px;cursor:pointer;min-width:120px}
      .btn-plain{background:#f3f4f6;color:#000;border:1px solid var(--border)}
      .btn-copy{background:#000;color:#fff}
      a.back{display:inline-block;margin-top:12px;color:var(--muted)}
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="card">
        <div class="meta">
          <div class="left"><strong>Mode:</strong> {{ mode }} &nbsp;&nbsp; <strong>File:</strong> {{ filename }}</div>
          <div class="actions">
            <button class="btn-plain" onclick="location.href='/'">New upload</button>
            <button class="btn-copy" id="copyBtn">Copy output</button>
          </div>
        </div>

        <hr style="margin:14px 0;border:none;border-top:1px solid #f1f5f9" />

        <pre class="output" id="output">{{ output }}</pre>

        <a class="back" href="/">&larr; Back to upload</a>
      </div>
    </div>

    <script>
      document.getElementById('copyBtn').addEventListener('click', async ()=>{
        const txt = document.getElementById('output').innerText;
        try{ await navigator.clipboard.writeText(txt); alert('Copied to clipboard'); }
        catch(e){ alert('Copy failed'); }
      });
    </script>
  </body>
</html>